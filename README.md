## Назначение

Принимать и обращать весь внешинй трафик внутрь сети крывая способы получение и доставки трафика

## Функциональность

### Текущая (11 ноября 2016)
 - коньсюминг http запросов и перепаковка их в amqp
 - прием ответных пакетов через amqp и отдача их запросившему (socket или http)
 
### Планируемая
 - коньсюминг socket.io коннекшнов и перепаковка их в amqp
 - отправка широковещательного сообщения в socket по айди коннекшна.
 
# Запуск 
 ###Кластер

- Запуск кластера (10 инстансов) 
  ```
  pm2 start app.js -i 10
  ```
- Остановка кластера
  ```
  pm2 stop app
  ```
- Жесткий рестарт
   ```
   pm2 restart app
   ```
- Рестарт с ожиданием закрытия сокетов
    ```
    pm2 gracefulReload app
    ```
 
### Один экземпляр
 - Запуск
    ```
    npm run
    ```
 - Остановка =)
    ```
    CTR + C
    ```
    
# Схема работы

Данный модуль преднозначен для разворачивания на фронтендных тачках в датацентарх 
которых может быть скольколько угодно. 
Предусматривается возможность того, что один датацентр будет отдавать трафик на обработку 
в другой датацентр.

По этой причине скрипту при старте нужно задавать датацент.
```
pm2 start app.js -x -- --dc=miran1
```

Так же скрипту будет задаваться облако. Теоретически облако будет меняться от релиза, но если хочется задать 
текущее при старте 
```
pm2 start app.js -x -- --cloud=11nov
```
